#!/bin/sh
# update & upgrade system #
echo "-----! Starting Custum Install Script !-----"
sleep 3

echo "----- Updating System Now -----"
sleep 2

sudo apt-get update -y
sudo apt-get upgrade -y
sudo apt update -y
sudo apt upgrade -y

echo "----- System Update Complete -----"
sleep 2

echo "----- Installing Software -----"
sleep 2

mkdir ~/.tmp_repos

sudo apt-get --no-upgrade --no-install-recommends install firefox

sudo apt install -y g++ libgtk-3-dev gtk-doc-tools gnutls-bin valac intltool libprce2-dev libglib3.0-cli-dev libgnutls28-dev libgirepository1.0-dev libxml2-utils gperf build-essential
git clone https://github.com/thestinger/vte-ng.git ~/.tmp_repos
echo export LIBRARY_PATH="/usr/include/gtk-3.0:$LIBRARY_PATH"
cd ~/.tmp_repos/vte-ng && .autogen.sh && make && sudo make install
cd ..

git clone --recursive https://github.com/thestinger/termite.git
cd termite && make && sudo make install
sudo ldconfig
sudo mkdir -p /lib/terminfo/x
sudo ln -s /usr/local/share/terminfo/x/xterm-termite /lib/terminfo/x/xterm-termite
cd ~/

sudo apt-get --no-upgrade install ranger
sudo apt-get --no-upgrade install git
sudo apt-get --no-upgrade install feh
sudo apt-get install --no-upgrade software-properties-common
sudo apt-get --no-upgrade install lolcat
sudo apt-get --no-upgrade install screenfetch
sudo apt-get --no-upgrade install neofetch

echo "----- Installation Complete -----"
sleep 2

echo "----- Fetching dot Files from Repository -----"
sleep 2

mkdir ~/.tmp_repos/ldf
git clone https://github.com/thefloppytoast/linuxdotfiles.git ~/.tmp_repos/ldf

cat ~/.tmp_repos/ldf/.bashrc >> ~/.bashrc
sudo cp -f ~/.tmp_repos/ldf/.bash_aliases ~/.bash_aliases
cp -f ~/.tmp_repos/ldf/.welcome ~/.welcome

sudo source ~/.bashrc

read -p "Install i3 environment? (y/n) " RESP
if [ "$RESP" = "y" ]; then
	echo "----- Installing i3 -----"
	sudo apt-get --no-upgrade install xinit xutils-dev autoconf automake -y
	
	sudo apt-get install libxcb1-dev libxcb-keysms1-dev libpango1.0-dev libxcb-util0-dev libxcb-icccm4-dev libyajl-dev libstrartup-notification0-dev libxcb-randr0-dev libxcb-xkb-dev libxkbcommon-dev libxkbcommon-x11-dev 
libxcb-xrm0 libxcb-xrm-dev -y

	mkdir ~/.tmp_repos/i3-gaps
	cd ~/.tmp_repos/i3-gaps
	git clone https://github.com/Airblader/i3
	cd i3
	autreconf --force --install
	rm -rf build/
	mkdir -p build && cd build/
	../configure --prefix=/usr --sysconfdir=/etc --disable-sanitizers
	make
	sudo make install

	sudo apt-get install i3-status
	sudo apt-get install compton
	sudo apt-get install --no-upgrade dmenu
	sudo apt-get --no-upgrade install fonts-font-awesome
	sudo apt-get -y install python3-pip
	pip3 install pywal

	read -p "Install Desktop Programs? (y/n) " RESPONSE
	if [ "$RESPONSE" = "y" ]; then
		sleep 2
		echo "----- Insatlling Programs -----"
		sudo apt-get --no-upgrade install thunar
		sudo apt-get --no-upgrade install thunderbird
	else
		echo "----- Skipping -----""
	fi

	read -p "Get dot Files for i3? (y/n) " RESPO
	if [ "$RESPO" = "y" ]; then 
		echo "----- Applying dot Files -----"
		cp -rf ~/.tmp_repos/ldf/.i3 ~/.i3
		cp -f ~/.tmp_repos/ldf/.i3_status.conf ~/.i3_status.conf
		cp -f ~/.tmp_repos/ldf/bg.jpg ~/bg.jpg
		wal -i ~/bg.jpg -c
	else
		echo "----- Skipping -----"
	fi
	echo "----- i3 Install Complete -----"
else
	echo "----- Skipping -----"
fi

sleep 3

read -p "Install a DisplayManager? (y/n) " RESPON
if [ "$RESPON" = "y" ]; then
	echo "----- Installing LightDM -----"
	sleep 2
	sudo apt-get --no-upgrade -y install slim
	echo "exec i3" >> ~/.xinitrc
else
	echo "----- Skipping -----"
fi

echo "----- Cleaning up -----"
rm -rf ~/.tmp_repos

echo "-----! Install Script Complete !-----"
sleep 1

read -p "Restart now? (y/n) " RESPONS
if [ "$RESPONS" = "y" ]; then
	echo "----- Rebooting now! -----"
	sudo reboot -h now
else
	echo "----- Script done -----"
fi

